{
  "iapVersions": [
    "2023.1"
  ],
  "adapters": [
    {
      "isDependency": false,
      "name": "adapter-aws_ec2",
      "overview": "AWS EC2",
      "webName": "Amazon EC2",
      "version": "0.6.9",
      "repoLink": "https://gitlab.com/itentialopensource/adapters/cloud/adapter-aws_ec2",
      "docLink": "https://docs.itential.com/opensource/docs/amazon-aws-ec2",
      "webLink": "https://www.itential.com/adapters/amazon-ec2/"
    }
  ],
  "externalDependencyList": [
    {
      "name": "AWS"
    }
  ],
  "capabilities": [
    {
      "capability": "The workflow is used to create an EC2 instance in AWS"
    }
  ],
  "entryPoint": {
    "name": "Create EC2 Instance - AWS",
    "type": "Workflow"
  },
  "inputs": [
    {
      "name": "imageId",
      "type": "string",
      "required": "yes",
      "description": "The ID of the AMI",
      "exampleValue": "ami-041feb57c611358bd"
    },
    {
      "name": "instanceType",
      "type": "string",
      "required": "no",
      "description": "The instance type",
      "exampleValue": "t2.micro"
    },
    {
      "name": "securityGroupId",
      "type": "array",
      "required": "yes",
      "description": "The IDs of the security groups",
      "exampleValue": "[\n   \"sg-0df320af9c57973a4\"\n]"
    },
    {
      "name": "networkInterface",
      "type": "array",
      "required": "no",
      "description": "The network interfaces to associate with the instance",
      "exampleValue": "[\n    {\n      \"SubnetId\": \"subnet-0d01076d82853eac1\",\n      \"DeviceIndex\": 0,\n      \"AssociatePublicIpAddress\": true,\n      \"SecurityGroupId\": [\n        \"sg-0f70c6ety78ee4450\"\n      ]\n    }\n  ]"
    },
    {
      "name": "vpcName",
      "type": "string",
      "required": "no",
      "description": "Name of the VPC",
      "exampleValue": "MY VPC"
    },
    {
      "name": "adapterId",
      "type": "string",
      "required": "yes",
      "description": "AWS EC2 adapter to use",
      "exampleValue": "EC2"
    }
  ],
  "outputs": [
    {
      "name": "publicIp",
      "type": "string",
      "description": "Public IP of the instance",
      "exampleValue": "54.204.78.24"
    },
    {
      "name": "instanceInfo",
      "type": "object",
      "description": "Created Instance Info",
      "exampleValue": "{\r\n  \"icode\": \"AD.200\",\r\n  \"response\": {\r\n    \"DescribeInstancesResponse\": {\r\n      \"_attr\": {\r\n        \"xmlns\": \"http:\/\/ec2.amazonaws.com\/doc\/2016-11-15\/\"\r\n      },\r\n      \"requestId\": \"59729eb9-c110-4b1c-bd2e-1a08dae45664\",\r\n      \"reservationSet\": {\r\n        \"item\": {\r\n          \"reservationId\": \"r-00bf9973a17756cb9\",\r\n          \"ownerId\": \"314014972859\",\r\n          \"groupSet\": \"\",\r\n          \"instancesSet\": {\r\n            \"item\": {\r\n              \"instanceId\": \"i-028ff00bc5698aad0\",\r\n              \"imageId\": \"ami-041feb57c611358bd\",\r\n              \"instanceState\": {\r\n                \"code\": \"16\",\r\n                \"name\": \"running\"\r\n              },\r\n              \"privateDnsName\": \"ip-172-31-18-198.ec2.internal\",\r\n              \"dnsName\": \"ec2-18-215-164-122.compute-1.amazonaws.com\",\r\n              \"reason\": \"\",\r\n              \"amiLaunchIndex\": \"0\",\r\n              \"productCodes\": \"\",\r\n              \"instanceType\": \"t2.micro\",\r\n              \"launchTime\": \"2023-10-23T00:43:27.000Z\",\r\n              \"placement\": {\r\n                \"availabilityZone\": \"us-east-1d\",\r\n                \"groupName\": \"\",\r\n                \"tenancy\": \"default\"\r\n              },\r\n              \"monitoring\": {\r\n                \"state\": \"disabled\"\r\n              },\r\n              \"subnetId\": \"subnet-0fd6d26fc17380403\",\r\n              \"vpcId\": \"vpc-0324c35cf9d083a40\",\r\n              \"privateIpAddress\": \"172.31.18.198\",\r\n              \"ipAddress\": \"18.215.164.122\",\r\n              \"sourceDestCheck\": \"true\",\r\n              \"groupSet\": {\r\n                \"item\": {\r\n                  \"groupId\": \"sg-0df320af9c57973a4\",\r\n                  \"groupName\": \"default\"\r\n                }\r\n              },\r\n              \"architecture\": \"x86_64\",\r\n              \"rootDeviceType\": \"ebs\",\r\n              \"rootDeviceName\": \"\/dev\/xvda\",\r\n              \"blockDeviceMapping\": {\r\n                \"item\": {\r\n                  \"deviceName\": \"\/dev\/xvda\",\r\n                  \"ebs\": {\r\n                    \"volumeId\": \"vol-06f72a3639723aa36\",\r\n                    \"status\": \"attached\",\r\n                    \"attachTime\": \"2023-10-23T00:43:27.000Z\",\r\n                    \"deleteOnTermination\": \"true\"\r\n                  }\r\n                }\r\n              },\r\n              \"virtualizationType\": \"hvm\",\r\n              \"clientToken\": \"\",\r\n              \"tagSet\": {\r\n                \"item\": {\r\n                  \"key\": \"Name\",\r\n                  \"value\": \"Apache Web Server for \"\r\n                }\r\n              },\r\n              \"hypervisor\": \"xen\",\r\n              \"networkInterfaceSet\": {\r\n                \"item\": {\r\n                  \"networkInterfaceId\": \"eni-08728a92558ff3548\",\r\n                  \"subnetId\": \"subnet-0fd6d26fc17380403\",\r\n                  \"vpcId\": \"vpc-0324c35cf9d083a40\",\r\n                  \"description\": \"\",\r\n                  \"ownerId\": \"314014972859\",\r\n                  \"status\": \"in-use\",\r\n                  \"macAddress\": \"0a:bd:5f:41:37:ff\",\r\n                  \"privateIpAddress\": \"172.31.18.198\",\r\n                  \"privateDnsName\": \"ip-172-31-18-198.ec2.internal\",\r\n                  \"sourceDestCheck\": \"true\",\r\n                  \"groupSet\": {\r\n                    \"item\": {\r\n                      \"groupId\": \"sg-0df320af9c57973a4\",\r\n                      \"groupName\": \"default\"\r\n                    }\r\n                  },\r\n                  \"attachment\": {\r\n                    \"attachmentId\": \"eni-attach-007008b2faaf46562\",\r\n                    \"deviceIndex\": \"0\",\r\n                    \"status\": \"attached\",\r\n                    \"attachTime\": \"2023-10-23T00:43:27.000Z\",\r\n                    \"deleteOnTermination\": \"true\",\r\n                    \"networkCardIndex\": \"0\"\r\n                  },\r\n                  \"association\": {\r\n                    \"publicIp\": \"54.204.78.24\",\r\n                    \"publicDnsName\": \"ec2-18-215-164-122.compute-1.amazonaws.com\",\r\n                    \"ipOwnerId\": \"amazon\"\r\n                  },\r\n                  \"privateIpAddressesSet\": {\r\n                    \"item\": {\r\n                      \"privateIpAddress\": \"172.31.18.198\",\r\n                      \"privateDnsName\": \"ip-172-31-18-198.ec2.internal\",\r\n                      \"primary\": \"true\",\r\n                      \"association\": {\r\n                        \"publicIp\": \"18.215.164.122\",\r\n                        \"publicDnsName\": \"ec2-18-215-164-122.compute-1.amazonaws.com\",\r\n                        \"ipOwnerId\": \"amazon\"\r\n                      }\r\n                    }\r\n                  },\r\n                  \"ipv6AddressesSet\": \"\",\r\n                  \"interfaceType\": \"interface\"\r\n                }\r\n              },\r\n              \"ebsOptimized\": \"false\",\r\n              \"enaSupport\": \"true\",\r\n              \"cpuOptions\": {\r\n                \"coreCount\": \"1\",\r\n                \"threadsPerCore\": \"1\"\r\n              },\r\n              \"capacityReservationSpecification\": {\r\n                \"capacityReservationPreference\": \"open\"\r\n              },\r\n              \"hibernationOptions\": {\r\n                \"configured\": \"false\"\r\n              },\r\n              \"enclaveOptions\": {\r\n                \"enabled\": \"false\"\r\n              },\r\n              \"metadataOptions\": {\r\n                \"state\": \"applied\",\r\n                \"httpTokens\": \"required\",\r\n                \"httpPutResponseHopLimit\": \"2\",\r\n                \"httpEndpoint\": \"enabled\",\r\n                \"httpProtocolIpv4\": \"enabled\",\r\n                \"httpProtocolIpv6\": \"disabled\",\r\n                \"instanceMetadataTags\": \"disabled\"\r\n              },\r\n              \"maintenanceOptions\": {\r\n                \"autoRecovery\": \"default\"\r\n              },\r\n              \"bootMode\": \"uefi-preferred\",\r\n              \"currentInstanceBootMode\": \"legacy-bios\",\r\n              \"platformDetails\": \"Linux\/UNIX\",\r\n              \"usageOperation\": \"RunInstances\",\r\n              \"usageOperationUpdateTime\": \"2023-10-23T00:43:26.000Z\",\r\n              \"privateDnsNameOptions\": {\r\n                \"hostnameType\": \"ip-name\",\r\n                \"enableResourceNameDnsARecord\": \"false\",\r\n                \"enableResourceNameDnsAAAARecord\": \"false\"\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}"
    }
  ],
  "exampleInputsAndOutputs": [
    {
      "exampleInput": "{\n  \"imageId\": \"ami-041feb57c611358bd\", \n  \"instanceType\": \"t2.micro\", \n  \"securityGroupId\": [\n    \"sg-0df320af9c57973a4\"\n  ], \n  \"networkInterface\": [],\n  \"adapterId\": \"EC2\", \n  \"vpcName\": \"\" \n}",
      "exampleOutput": "{\n  \"instanceInfo\": {\n    \"icode\": \"AD.200\",\n    \"response\": {\n      \"DescribeInstancesResponse\": {\n        \"_attr\": {\n          \"xmlns\": \"http:\/\/ec2.amazonaws.com\/doc\/2016-11-15\/\"\n        },\n        \"requestId\": \"59729eb9-c110-4b1c-bd2e-1a08dae45664\",\n        \"reservationSet\": {\n          \"item\": {\n            \"reservationId\": \"r-00bf9973a17756cb9\",\n            \"ownerId\": \"314014972859\",\n            \"groupSet\": \"\",\n            \"instancesSet\": {\n              \"item\": {\n                \"instanceId\": \"i-028ff00bc5698aad0\",\n                \"imageId\": \"ami-041feb57c611358bd\",\n                \"instanceState\": {\n                  \"code\": \"16\",\n                  \"name\": \"running\"\n                },\n                \"privateDnsName\": \"ip-172-31-18-198.ec2.internal\",\n                \"dnsName\": \"ec2-18-215-164-122.compute-1.amazonaws.com\",\n                \"reason\": \"\",\n                \"amiLaunchIndex\": \"0\",\n                \"productCodes\": \"\",\n                \"instanceType\": \"t2.micro\",\n                \"launchTime\": \"2023-10-23T00:43:27.000Z\",\n                \"placement\": {\n                  \"availabilityZone\": \"us-east-1d\",\n                  \"groupName\": \"\",\n                  \"tenancy\": \"default\"\n                },\n                \"monitoring\": {\n                  \"state\": \"disabled\"\n                },\n                \"subnetId\": \"subnet-0fd6d26fc17380403\",\n                \"vpcId\": \"vpc-0324c35cf9d083a40\",\n                \"privateIpAddress\": \"172.31.18.198\",\n                \"ipAddress\": \"18.215.164.122\",\n                \"sourceDestCheck\": \"true\",\n                \"groupSet\": {\n                  \"item\": {\n                    \"groupId\": \"sg-0df320af9c57973a4\",\n                    \"groupName\": \"default\"\n                  }\n                },\n                \"architecture\": \"x86_64\",\n                \"rootDeviceType\": \"ebs\",\n                \"rootDeviceName\": \"\/dev\/xvda\",\n                \"blockDeviceMapping\": {\n                  \"item\": {\n                    \"deviceName\": \"\/dev\/xvda\",\n                    \"ebs\": {\n                      \"volumeId\": \"vol-06f72a3639723aa36\",\n                      \"status\": \"attached\",\n                      \"attachTime\": \"2023-10-23T00:43:27.000Z\",\n                      \"deleteOnTermination\": \"true\"\n                    }\n                  }\n                },\n                \"virtualizationType\": \"hvm\",\n                \"clientToken\": \"\",\n                \"tagSet\": {\n                  \"item\": {\n                    \"key\": \"Name\",\n                    \"value\": \"Apache Web Server for \"\n                  }\n                },\n                \"hypervisor\": \"xen\",\n                \"networkInterfaceSet\": {\n                  \"item\": {\n                    \"networkInterfaceId\": \"eni-08728a92558ff3548\",\n                    \"subnetId\": \"subnet-0fd6d26fc17380403\",\n                    \"vpcId\": \"vpc-0324c35cf9d083a40\",\n                    \"description\": \"\",\n                    \"ownerId\": \"314014972859\",\n                    \"status\": \"in-use\",\n                    \"macAddress\": \"0a:bd:5f:41:37:ff\",\n                    \"privateIpAddress\": \"172.31.18.198\",\n                    \"privateDnsName\": \"ip-172-31-18-198.ec2.internal\",\n                    \"sourceDestCheck\": \"true\",\n                    \"groupSet\": {\n                      \"item\": {\n                        \"groupId\": \"sg-0df320af9c57973a4\",\n                        \"groupName\": \"default\"\n                      }\n                    },\n                    \"attachment\": {\n                      \"attachmentId\": \"eni-attach-007008b2faaf46562\",\n                      \"deviceIndex\": \"0\",\n                      \"status\": \"attached\",\n                      \"attachTime\": \"2023-10-23T00:43:27.000Z\",\n                      \"deleteOnTermination\": \"true\",\n                      \"networkCardIndex\": \"0\"\n                    },\n                    \"association\": {\n                      \"publicIp\": \"54.204.78.24\",\n                      \"publicDnsName\": \"ec2-18-215-164-122.compute-1.amazonaws.com\",\n                      \"ipOwnerId\": \"amazon\"\n                    },\n                    \"privateIpAddressesSet\": {\n                      \"item\": {\n                        \"privateIpAddress\": \"172.31.18.198\",\n                        \"privateDnsName\": \"ip-172-31-18-198.ec2.internal\",\n                        \"primary\": \"true\",\n                        \"association\": {\n                          \"publicIp\": \"18.215.164.122\",\n                          \"publicDnsName\": \"ec2-18-215-164-122.compute-1.amazonaws.com\",\n                          \"ipOwnerId\": \"amazon\"\n                        }\n                      }\n                    },\n                    \"ipv6AddressesSet\": \"\",\n                    \"interfaceType\": \"interface\"\n                  }\n                },\n                \"ebsOptimized\": \"false\",\n                \"enaSupport\": \"true\",\n                \"cpuOptions\": {\n                  \"coreCount\": \"1\",\n                  \"threadsPerCore\": \"1\"\n                },\n                \"capacityReservationSpecification\": {\n                  \"capacityReservationPreference\": \"open\"\n                },\n                \"hibernationOptions\": {\n                  \"configured\": \"false\"\n                },\n                \"enclaveOptions\": {\n                  \"enabled\": \"false\"\n                },\n                \"metadataOptions\": {\n                  \"state\": \"applied\",\n                  \"httpTokens\": \"required\",\n                  \"httpPutResponseHopLimit\": \"2\",\n                  \"httpEndpoint\": \"enabled\",\n                  \"httpProtocolIpv4\": \"enabled\",\n                  \"httpProtocolIpv6\": \"disabled\",\n                  \"instanceMetadataTags\": \"disabled\"\n                },\n                \"maintenanceOptions\": {\n                  \"autoRecovery\": \"default\"\n                },\n                \"bootMode\": \"uefi-preferred\",\n                \"currentInstanceBootMode\": \"legacy-bios\",\n                \"platformDetails\": \"Linux\/UNIX\",\n                \"usageOperation\": \"RunInstances\",\n                \"usageOperationUpdateTime\": \"2023-10-23T00:43:26.000Z\",\n                \"privateDnsNameOptions\": {\n                  \"hostnameType\": \"ip-name\",\n                  \"enableResourceNameDnsARecord\": \"false\",\n                  \"enableResourceNameDnsAAAARecord\": \"false\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  \"publicIp\": \"54.204.78.24\"\n}\n"
    }
  ],
  "queryOutput": {
    "success": [
      {
        "name": "Public IP of the instance",
        "value": "publicIp"
      },
      {
        "name": "Describe Instance Request",
        "value": "instanceInfo.response"
      }
    ]
  },
  "name": "Create EC2 Instance - AWS",
  "overview": "Create an EC2 instance in AWS",
  "webName": "Create EC2 Instance - AWS - EC2",
  "assetType": "Workflow"
}