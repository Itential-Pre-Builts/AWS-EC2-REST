{
  "input": { "description": "It should run Destroy VPC and EC2 Instance if there is one instances", "variables": { "vpcId": "vpc-004c7963c31a8d156", "adapterId": "EC2" } },
  "expectedTaskResults": {
    "status": "complete",
    "variables": {
      "vpcId": "vpc-004c7963c31a8d156",
      "adapterId": "EC2"
    }
  },
  "stubTasks": [
    {
      "taskId": "6253",
      "variables": {
        "incoming": { "vpcId": "vpc-004c7963c31a8d156", "dryRun": false },
        "outgoing": {
          "result": {
            "icode": "AD.200",
            "response": { "DeleteVpcResponse": { "_attr": { "xmlns": "http://ec2.amazonaws.com/doc/2016-11-15/" }, "requestId": "3166419e-f793-4759-8dc1-7aa55d2741af", "return": "true" } }
          }
        }
      }
    },
    {
      "taskId": "9653",
      "variables": {
        "incoming": { "filter": [{ "name": "network-interface.vpc-id", "value": "vpc-004c7963c31a8d156" }], "instanceId": "", "dryRun": false, "maxResults": "", "nextToken": "" },
        "outgoing": {
          "result": {
            "icode": "AD.200",
            "response": {
              "DescribeInstancesResponse": {
                "_attr": { "xmlns": "http://ec2.amazonaws.com/doc/2016-11-15/" },
                "requestId": "dd59bf6b-7989-4a45-863f-8fce807dd483",
                "reservationSet": {
                  "item": {
                    "reservationId": "r-0ce6f44c496ee7b9f",
                    "ownerId": "314014972859",
                    "groupSet": "",
                    "instancesSet": {
                      "item": {
                        "instanceId": "i-0e42c85a337e14451",
                        "imageId": "ami-0df435f331839b2d6",
                        "instanceState": { "code": "16", "name": "running" },
                        "privateDnsName": "ip-10-0-0-154.ec2.internal",
                        "dnsName": "",
                        "reason": "",
                        "amiLaunchIndex": "0",
                        "productCodes": "",
                        "instanceType": "t2.micro",
                        "launchTime": "2023-10-23T02:48:16.000Z",
                        "placement": { "availabilityZone": "us-east-1a", "groupName": "", "tenancy": "default" },
                        "monitoring": { "state": "disabled" },
                        "subnetId": "subnet-00ab9bdb3bb272c4f",
                        "vpcId": "vpc-004c7963c31a8d156",
                        "privateIpAddress": "10.0.0.154",
                        "sourceDestCheck": "true",
                        "groupSet": { "item": { "groupId": "sg-07da1ebf562e13df0", "groupName": "launch-wizard-1" } },
                        "architecture": "x86_64",
                        "rootDeviceType": "ebs",
                        "rootDeviceName": "/dev/xvda",
                        "blockDeviceMapping": {
                          "item": {
                            "deviceName": "/dev/xvda",
                            "ebs": { "volumeId": "vol-028dee64b0bb85640", "status": "attached", "attachTime": "2023-10-23T02:48:17.000Z", "deleteOnTermination": "true" }
                          }
                        },
                        "virtualizationType": "hvm",
                        "clientToken": "2477090c-16ae-4e95-999a-38a9af968366",
                        "hypervisor": "xen",
                        "networkInterfaceSet": {
                          "item": {
                            "networkInterfaceId": "eni-00d564570039991d4",
                            "subnetId": "subnet-00ab9bdb3bb272c4f",
                            "vpcId": "vpc-004c7963c31a8d156",
                            "description": "",
                            "ownerId": "314014972859",
                            "status": "in-use",
                            "macAddress": "0e:a7:4b:9c:9a:e9",
                            "privateIpAddress": "10.0.0.154",
                            "sourceDestCheck": "true",
                            "groupSet": { "item": { "groupId": "sg-07da1ebf562e13df0", "groupName": "launch-wizard-1" } },
                            "attachment": {
                              "attachmentId": "eni-attach-0162f63ce314e4916",
                              "deviceIndex": "0",
                              "status": "attached",
                              "attachTime": "2023-10-23T02:48:16.000Z",
                              "deleteOnTermination": "true",
                              "networkCardIndex": "0"
                            },
                            "privateIpAddressesSet": { "item": { "privateIpAddress": "10.0.0.154", "primary": "true" } },
                            "ipv6AddressesSet": "",
                            "interfaceType": "interface"
                          }
                        },
                        "ebsOptimized": "false",
                        "enaSupport": "true",
                        "cpuOptions": { "coreCount": "1", "threadsPerCore": "1" },
                        "capacityReservationSpecification": { "capacityReservationPreference": "open" },
                        "hibernationOptions": { "configured": "false" },
                        "enclaveOptions": { "enabled": "false" },
                        "metadataOptions": {
                          "state": "applied",
                          "httpTokens": "required",
                          "httpPutResponseHopLimit": "2",
                          "httpEndpoint": "enabled",
                          "httpProtocolIpv4": "enabled",
                          "httpProtocolIpv6": "disabled",
                          "instanceMetadataTags": "disabled"
                        },
                        "maintenanceOptions": { "autoRecovery": "default" },
                        "bootMode": "uefi-preferred",
                        "currentInstanceBootMode": "legacy-bios",
                        "platformDetails": "Linux/UNIX",
                        "usageOperation": "RunInstances",
                        "usageOperationUpdateTime": "2023-10-23T02:48:16.000Z",
                        "privateDnsNameOptions": { "hostnameType": "ip-name", "enableResourceNameDnsARecord": "false", "enableResourceNameDnsAAAARecord": "false" }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    {
      "taskId": "e0fe",
      "variables": {
        "incoming": { "filter": "", "vpcId": ["vpc-004c7963c31a8d156"], "dryRun": false, "nextToken": "", "maxResults": "" },
        "outgoing": {
          "result": {
            "icode": "AD.200",
            "response": {
              "DescribeVpcsResponse": {
                "_attr": { "xmlns": "http://ec2.amazonaws.com/doc/2016-11-15/" },
                "requestId": "ab239290-fb0f-4bc2-8504-d608ac550fca",
                "vpcSet": {
                  "item": {
                    "vpcId": "vpc-004c7963c31a8d156",
                    "ownerId": "314014972859",
                    "state": "available",
                    "cidrBlock": "10.0.0.0/24",
                    "cidrBlockAssociationSet": { "item": { "cidrBlock": "10.0.0.0/24", "associationId": "vpc-cidr-assoc-0fe529af5f62c9897", "cidrBlockState": { "state": "associated" } } },
                    "dhcpOptionsId": "dopt-045a5c88c0d702d2b",
                    "instanceTenancy": "default",
                    "isDefault": "false"
                  }
                }
              }
            }
          }
        }
      }
    },
    {
      "taskId": "9b69",
      "variables": {
        "incoming": {
          "task": "9b69",
          "workflow": "Delete Subnets by VPC - AWS",
          "variables": { "vpcId": { "editable": false, "task": "job", "value": "vpcId" }, "adapterId": { "task": "job", "value": "adapterId" } },
          "data_array": "",
          "transformation": "",
          "loopType": ""
        },
        "outgoing": {
          "job_details": {
            "status": "complete",
            "vpcId": "vpc-004c7963c31a8d156",
            "adapterId": "EC2",
            "_id": "959dc88bfe42435e99146e9b",
            "initiator": "admin@pronghorn",
            "deletedSubnet": [
              {
                "icode": "AD.200",
                "response": { "DeleteSubnetResponse": { "_attr": { "xmlns": "http://ec2.amazonaws.com/doc/2016-11-15/" }, "requestId": "4b71d119-7d66-4c4d-9b0d-29292b36f23b", "return": "true" } },
                "headers": {
                  "x-amzn-requestid": "4b71d119-7d66-4c4d-9b0d-29292b36f23b",
                  "cache-control": "no-cache, no-store",
                  "strict-transport-security": "max-age=31536000; includeSubDomains",
                  "content-type": "text/xml;charset=UTF-8",
                  "content-length": "225",
                  "date": "Mon, 23 Oct 2023 02:54:18 GMT",
                  "keep-alive": "timeout=20",
                  "server": "AmazonEC2",
                  "connection": "close"
                },
                "metrics": { "code": 200, "timeouts": 0, "redirects": 0, "retries": 0, "tripTime": 633, "isThrottling": false, "capabilityTime": "1149ms" }
              }
            ]
          }
        }
      }
    },
    {
      "taskId": "cac5",
      "variables": {
        "incoming": {
          "task": "cac5",
          "workflow": "Detach and Delete Internet Gateways by VPC - AWS",
          "variables": { "vpcId": { "task": "job", "value": "vpcId" }, "adapterId": { "task": "job", "value": "adapterId" } },
          "data_array": "",
          "transformation": "",
          "loopType": ""
        },
        "outgoing": {
          "job_details": {
            "status": "complete",
            "vpcId": "vpc-004c7963c31a8d156",
            "adapterId": "EC2",
            "_id": "caa61fb30a5d43caae7cf4ff",
            "initiator": "admin@pronghorn",
            "deletedInternetGateway": {
              "icode": "AD.200",
              "response": {
                "DeleteInternetGatewayResponse": { "_attr": { "xmlns": "http://ec2.amazonaws.com/doc/2016-11-15/" }, "requestId": "52ef1277-9faf-40d2-9dfc-648e148c0119", "return": "true" }
              },
              "headers": {
                "x-amzn-requestid": "52ef1277-9faf-40d2-9dfc-648e148c0119",
                "cache-control": "no-cache, no-store",
                "strict-transport-security": "max-age=31536000; includeSubDomains",
                "content-type": "text/xml;charset=UTF-8",
                "content-length": "243",
                "date": "Mon, 23 Oct 2023 02:54:35 GMT",
                "keep-alive": "timeout=20",
                "server": "AmazonEC2",
                "connection": "close"
              },
              "metrics": { "code": 200, "timeouts": 0, "redirects": 0, "retries": 0, "tripTime": 352, "isThrottling": false, "capabilityTime": "711ms" }
            }
          }
        }
      }
    },
    {
      "taskId": "ab1",
      "variables": {
        "incoming": { "filter": [{ "name": "network-interface.vpc-id", "value": "vpc-004c7963c31a8d156" }], "instanceId": "", "dryRun": false, "maxResults": "", "nextToken": "" },
        "outgoing": {
          "result": {
            "icode": "AD.200",
            "response": {
              "DescribeInstancesResponse": {
                "_attr": { "xmlns": "http://ec2.amazonaws.com/doc/2016-11-15/" },
                "requestId": "b854c05b-fdc1-4d18-8cdb-c90a87310030",
                "reservationSet": ""
              }
            }
          }
        }
      }
    },
    {
      "taskId": "a879",
      "variables": {
        "incoming": {
          "task": "a879",
          "workflow": "Delete Security Groups by VPC - AWS",
          "variables": { "vpcId": { "editable": false, "task": "job", "value": "vpcId" }, "adapterId": { "task": "job", "value": "adapterId" } },
          "data_array": "",
          "transformation": "",
          "loopType": ""
        },
        "outgoing": {
          "job_details": {
            "status": "complete",
            "vpcId": "vpc-004c7963c31a8d156",
            "adapterId": "EC2",
            "_id": "170e4c6efbcf44d3bf710949",
            "initiator": "admin@pronghorn",
            "deletedSecurityGroup": [
              {
                "icode": "AD.200",
                "response": {
                  "DeleteSecurityGroupResponse": { "_attr": { "xmlns": "http://ec2.amazonaws.com/doc/2016-11-15/" }, "requestId": "59d508bc-396e-46f0-be46-1ac322954c09", "return": "true" }
                },
                "headers": {
                  "x-amzn-requestid": "59d508bc-396e-46f0-be46-1ac322954c09",
                  "cache-control": "no-cache, no-store",
                  "strict-transport-security": "max-age=31536000; includeSubDomains",
                  "content-type": "text/xml;charset=UTF-8",
                  "content-length": "239",
                  "date": "Mon, 23 Oct 2023 02:54:09 GMT",
                  "keep-alive": "timeout=20",
                  "server": "AmazonEC2",
                  "connection": "close"
                },
                "metrics": { "code": 200, "timeouts": 0, "redirects": 0, "retries": 0, "tripTime": 5826, "isThrottling": false, "capabilityTime": "6273ms" }
              },
              {
                "icode": "AD.200",
                "response": {
                  "DeleteSecurityGroupResponse": { "_attr": { "xmlns": "http://ec2.amazonaws.com/doc/2016-11-15/" }, "requestId": "4c0e767f-510d-41e4-ab6b-d00a1e50cac6", "return": "true" }
                },
                "headers": {
                  "x-amzn-requestid": "4c0e767f-510d-41e4-ab6b-d00a1e50cac6",
                  "cache-control": "no-cache, no-store",
                  "strict-transport-security": "max-age=31536000; includeSubDomains",
                  "content-type": "text/xml;charset=UTF-8",
                  "content-length": "239",
                  "date": "Mon, 23 Oct 2023 02:54:09 GMT",
                  "keep-alive": "timeout=20",
                  "server": "AmazonEC2",
                  "connection": "close"
                },
                "metrics": { "code": 200, "timeouts": 0, "redirects": 0, "retries": 0, "tripTime": 4627, "isThrottling": false, "capabilityTime": "5549ms" }
              },
              {
                "icode": "AD.200",
                "response": {
                  "DeleteSecurityGroupResponse": { "_attr": { "xmlns": "http://ec2.amazonaws.com/doc/2016-11-15/" }, "requestId": "ad2a767a-2858-4033-9748-470cf41ef93d", "return": "true" }
                },
                "headers": {
                  "x-amzn-requestid": "ad2a767a-2858-4033-9748-470cf41ef93d",
                  "cache-control": "no-cache, no-store",
                  "strict-transport-security": "max-age=31536000; includeSubDomains",
                  "content-type": "text/xml;charset=UTF-8",
                  "content-length": "239",
                  "date": "Mon, 23 Oct 2023 02:54:08 GMT",
                  "keep-alive": "timeout=20",
                  "server": "AmazonEC2",
                  "connection": "close"
                },
                "metrics": { "code": 200, "timeouts": 0, "redirects": 0, "retries": 0, "tripTime": 3673, "isThrottling": false, "capabilityTime": "4133ms" }
              },
              {
                "icode": "AD.200",
                "response": {
                  "DeleteSecurityGroupResponse": { "_attr": { "xmlns": "http://ec2.amazonaws.com/doc/2016-11-15/" }, "requestId": "1947cd71-5831-472d-938c-916aa9fe58e6", "return": "true" }
                },
                "headers": {
                  "x-amzn-requestid": "1947cd71-5831-472d-938c-916aa9fe58e6",
                  "cache-control": "no-cache, no-store",
                  "strict-transport-security": "max-age=31536000; includeSubDomains",
                  "content-type": "text/xml;charset=UTF-8",
                  "content-length": "239",
                  "date": "Mon, 23 Oct 2023 02:54:09 GMT",
                  "keep-alive": "timeout=20",
                  "server": "AmazonEC2",
                  "connection": "close"
                },
                "metrics": { "code": 200, "timeouts": 0, "redirects": 0, "retries": 0, "tripTime": 2333, "isThrottling": false, "capabilityTime": "2986ms" }
              },
              {
                "icode": "AD.200",
                "response": {
                  "DeleteSecurityGroupResponse": { "_attr": { "xmlns": "http://ec2.amazonaws.com/doc/2016-11-15/" }, "requestId": "3280c839-76de-4b27-adbf-11ccac3b5ff1", "return": "true" }
                },
                "headers": {
                  "x-amzn-requestid": "3280c839-76de-4b27-adbf-11ccac3b5ff1",
                  "cache-control": "no-cache, no-store",
                  "strict-transport-security": "max-age=31536000; includeSubDomains",
                  "content-type": "text/xml;charset=UTF-8",
                  "content-length": "239",
                  "date": "Mon, 23 Oct 2023 02:54:09 GMT",
                  "keep-alive": "timeout=20",
                  "server": "AmazonEC2",
                  "connection": "close"
                },
                "metrics": { "code": 200, "timeouts": 0, "redirects": 0, "retries": 0, "tripTime": 2189, "isThrottling": false, "capabilityTime": "2692ms" }
              },
              {
                "icode": "AD.200",
                "response": {
                  "DeleteSecurityGroupResponse": { "_attr": { "xmlns": "http://ec2.amazonaws.com/doc/2016-11-15/" }, "requestId": "8fedbddf-68f2-4495-8780-7e3844d96b53", "return": "true" }
                },
                "headers": {
                  "x-amzn-requestid": "8fedbddf-68f2-4495-8780-7e3844d96b53",
                  "cache-control": "no-cache, no-store",
                  "strict-transport-security": "max-age=31536000; includeSubDomains",
                  "content-type": "text/xml;charset=UTF-8",
                  "content-length": "239",
                  "date": "Mon, 23 Oct 2023 02:54:09 GMT",
                  "keep-alive": "timeout=20",
                  "server": "AmazonEC2",
                  "connection": "close"
                },
                "metrics": { "code": 200, "timeouts": 0, "redirects": 0, "retries": 0, "tripTime": 1363, "isThrottling": false, "capabilityTime": "1976ms" }
              }
            ]
          }
        }
      }
    },
    {
      "taskId": "a4ce",
      "variables": {
        "incoming": { "instanceId": ["i-0e42c85a337e14451"], "dryRun": false },
        "outgoing": {
          "result": {
            "icode": "AD.200",
            "response": {
              "TerminateInstancesResponse": {
                "_attr": { "xmlns": "http://ec2.amazonaws.com/doc/2016-11-15/" },
                "requestId": "165f42c3-2d7c-43eb-9fbf-fc1301b218a8",
                "instancesSet": { "item": { "instanceId": "i-0e42c85a337e14451", "currentState": { "code": "32", "name": "shutting-down" }, "previousState": { "code": "16", "name": "running" } } }
              }
            }
          }
        }
      }
    }
  ]
}
