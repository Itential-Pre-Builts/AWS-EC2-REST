{
  "input": {
    "description": "It should run Provision VPC with Networking",
    "variables": { 
      "vpcSubnet": "10.20.30.1/28",
      "vpcName": "Test VPC1234",
      "adapterId": "EC2",
      "securityGroupName": "TESTING 1",
      "securityGroupDesc": "Security Group for TESTING",
      "ingressRules": [
        {
          "sourceSubnetCidrMask": 32, 
          "sourceIp": "199.27.253.134", 
          "protocol": "TCP", 
          "port": 80
        }
      ] 
    }
  },
  "expectedTaskResults": {
    "status": "complete",
    "variables": {
      "vpcSubnet": "10.20.30.1/28",
      "vpcName": "Test VPC1234",
      "adapterId": "EC2",
      "securityGroupName": "TESTING 1",
      "securityGroupDesc": "Security Group for TESTING",
      "ingressRules": [{ "sourceSubnetCidrMask": 32, "sourceIp": "199.27.253.134", "protocol": "TCP", "port": 80 }],
      "vpcId": "vpc-0b678b7a21e66ded8",
      "subnetId": "subnet-097a82181b977273f",
      "internetGatewayId": "igw-070593dabfda1adf0",
      "securityGroupId": "sg-0cdc4162d4cd16dfe"
    }
  },
  "stubTasks": [
    {
      "taskId": "6105",
      "variables": {
        "incoming": {
          "task": "6105",
          "workflow": "Create VPC - AWS",
          "variables": {
            "cidrBlock": { "editable": true, "task": "job", "value": "vpcSubnet" },
            "vpcName": { "task": "job", "value": "vpcName" },
            "adapterId": { "task": "job", "value": "adapterId" }
          },
          "data_array": "",
          "transformation": "",
          "loopType": ""
        },
        "outgoing": {
          "job_details": {
            "status": "complete",
            "cidrBlock": "10.20.30.1/28",
            "vpcName": "Test VPC1234",
            "adapterId": "EC2",
            "_id": "87640c3cec34484daf7a4ccf",
            "initiator": "admin@pronghorn",
            "createdVpc": {
              "icode": "AD.200",
              "response": {
                "CreateVpcResponse": {
                  "_attr": { "xmlns": "http://ec2.amazonaws.com/doc/2016-11-15/" },
                  "requestId": "dcaa0734-4070-4c77-be10-9acee019d300",
                  "vpc": {
                    "vpcId": "vpc-0b678b7a21e66ded8",
                    "ownerId": "314014972859",
                    "state": "pending",
                    "cidrBlock": "10.20.30.0/28",
                    "cidrBlockAssociationSet": { "item": { "cidrBlock": "10.20.30.0/28", "associationId": "vpc-cidr-assoc-0c49eb49f4fb7d386", "cidrBlockState": { "state": "associated" } } },
                    "ipv6CidrBlockAssociationSet": "",
                    "dhcpOptionsId": "dopt-045a5c88c0d702d2b",
                    "instanceTenancy": "default",
                    "isDefault": "false"
                  }
                }
              },
              "headers": {
                "x-amzn-requestid": "dcaa0734-4070-4c77-be10-9acee019d300",
                "cache-control": "no-cache, no-store",
                "strict-transport-security": "max-age=31536000; includeSubDomains",
                "content-type": "text/xml;charset=UTF-8",
                "content-length": "918",
                "date": "Wed, 18 Oct 2023 16:26:19 GMT",
                "keep-alive": "timeout=20",
                "server": "AmazonEC2",
                "connection": "close"
              },
              "metrics": { "code": 200, "timeouts": 0, "redirects": 0, "retries": 0, "tripTime": 625, "isThrottling": false, "capabilityTime": "1252ms" }
            }
          }
        }
      }
    },
    {
      "taskId": "cb2e",
      "variables": {
        "incoming": {
          "task": "cb2e",
          "workflow": "Create VPC Subnet - AWS",
          "variables": {
            "cidrBlock": { "editable": true, "task": "job", "value": "vpcSubnet" },
            "vpcId": { "editable": true, "task": "7a4f", "value": "return_data" },
            "adapterId": { "task": "job", "value": "adapterId" }
          },
          "data_array": "",
          "transformation": "",
          "loopType": ""
        },
        "outgoing": {
          "job_details": {
            "status": "complete",
            "cidrBlock": "10.20.30.1/28",
            "adapterId": "EC2",
            "vpcId": "vpc-0b678b7a21e66ded8",
            "_id": "fadd48d9e8d14ac7af980f36",
            "initiator": "admin@pronghorn",
            "subnetId": "subnet-097a82181b977273f"
          }
        }
      }
    },
    {
      "taskId": "ee02",
      "variables": {
        "incoming": {
          "task": "ee02",
          "workflow": "Create and Attach Internet Gateway - AWS",
          "variables": { "vpcId": { "editable": true, "task": "7a4f", "value": "return_data" }, "adapterId": { "task": "job", "value": "adapterId" } },
          "data_array": "",
          "transformation": "",
          "loopType": ""
        },
        "outgoing": {
          "job_details": {
            "status": "complete",
            "adapterId": "EC2",
            "vpcId": "vpc-0b678b7a21e66ded8",
            "_id": "4ecffd90638d49929e80a195",
            "initiator": "admin@pronghorn",
            "internetGatewayId": "igw-070593dabfda1adf0"
          }
        }
      }
    },
    {
      "taskId": "e5bc",
      "variables": {
        "incoming": {
          "task": "e5bc",
          "workflow": "Create Route - AWS",
          "variables": {
            "destinationCidrBlock": { "editable": true, "task": "static", "value": "0.0.0.0/0" },
            "gatewayId": { "editable": true, "task": "2f28", "value": "return_data" },
            "vpcId": { "editable": true, "task": "7a4f", "value": "return_data" },
            "adapterId": { "task": "job", "value": "adapterId" }
          },
          "data_array": "",
          "transformation": "",
          "loopType": ""
        },
        "outgoing": {
          "job_details": {
            "status": "complete",
            "destinationCidrBlock": "0.0.0.0/0",
            "adapterId": "EC2",
            "gatewayId": "igw-070593dabfda1adf0",
            "vpcId": "vpc-0b678b7a21e66ded8",
            "_id": "b80ef2afab88434e8f34f9af",
            "initiator": "admin@pronghorn",
            "routeTableId": "rtb-0fb93c4c9b6e17adb"
          }
        }
      }
    },
    {
      "taskId": "5d5e",
      "variables": {
        "incoming": {
          "task": "5d5e",
          "workflow": "Create Security Group with Ingress Rules - AWS",
          "variables": {
            "securityGroupDescription": { "editable": true, "task": "job", "value": "securityGroupName" },
            "securityGroupName": { "task": "job", "value": "securityGroupDesc" },
            "vpcId": { "editable": true, "task": "7a4f", "value": "return_data" },
            "ruleList": { "editable": true, "task": "5f81", "value": "ruleList" },
            "adapterId": { "task": "job", "value": "adapterId" }
          },
          "data_array": "",
          "transformation": "",
          "loopType": ""
        },
        "outgoing": {
          "job_details": {
            "status": "complete",
            "securityGroupDescription": "TESTING 1",
            "securityGroupName": "Security Group for TESTING",
            "adapterId": "EC2",
            "vpcId": "vpc-0b678b7a21e66ded8",
            "ruleList": [{ "sourceSubnetCidrMask": 32, "port": 80, "sourceIp": "199.27.253.134", "protocol": "TCP" }],
            "_id": null,
            "initiator": null,
            "securityGroupId": "sg-0cdc4162d4cd16dfe",
            "sourceCidrIp": null,
            "fromPort": null,
            "groupId": null,
            "ipProtocol": null,
            "toPort": null
          }
        }
      }
    }
  ]
}
